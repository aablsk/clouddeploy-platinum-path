###########################################################
# This is a K8S template for Solution1 with some variables.
# You cant kubectl apply this or you'll get errors.
#
# Vars:
#  APP_NAME: __APP_NAME__
#  PREFIX:   __PREFIX__
#  REGION:   __REGION__
#
# .. and so on. in general things with double underscore left and right as Im not a great sedder :)
###########################################################
kind: Gateway
apiVersion: gateway.networking.k8s.io/v1alpha2
metadata:
  name: sol1-__PREFIX__-ext-gw     # dmarzi_was: external-store-http
spec:
  # PREFIX can be app01, app02, ... maybe with a dash.
  # Consider adding a region too to make this solutionm multiregional :)
  gatewayClassName: gke-l7-gxlb # I think this is the bug: I shold NOT change this! Try this:
  # $ bin/kubectl-prod get gatewayclass
  # [PROD] gke-l7-gxlb   networking.gke.io/gateway   7d21h
  # [PROD] gke-l7-rilb   networking.gke.io/gateway   7d21h
  # sol1-__PREFIX__-gke-l7-gxlb # dmarzi_was: gke-l7-gxlb
  listeners:
  - name: http
    protocol: HTTP
    port: 80
    allowedRoutes:
      kinds:
      - kind: HTTPRoute
